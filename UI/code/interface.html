<!DOCTYPE html>
<html>

<head>
    <!-- Linking to CSS stylesheet -->
    <link rel="stylesheet" type="text/css" href="interface.css">

    <!-- Linking to Javascript file 
    <script type="text/javascript" src="interface.js"></script>   JH: Why run this twice?  And why here? -->

    <!-- Linking to Javascript/CSS libraries -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link href="libraries/css/simple-sidebar.css" rel="stylesheet">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>  
    <script type="text/javascript" src="../lib/d3.v3.min.js"></script>

    
    <title>Budgeting Tool</title>
</head>


<body onload="variable_bubble(); generate_epsilon_table(); ">
<body>

<div id="setdataset" style="padding:10px 10px 10px 50px;background:#f2f2e6;">
<table>
    <tr>
        <td title="This demonstration is linked to a test instance of Dataverse at https://beta.dataverse.org &#13;  You can select one of the example datasets by name, or any other dataset (including your own) by entering the file ID number below." align="right">
            Select Dataverse dataset for demonstration:
        </td>
        <td title="This demonstration is linked to a test instance of Dataverse at https://beta.dataverse.org &#13;  You can select one of the example datasets by name, or any other dataset (including your own) by entering the file ID number below." style="padding:0 0 0 8px;">
            <select name="dataselect" id="dataselect" onchange="changedataset(this.value)">
            <option value="0">- Select -</option>
            <option value="20" selected="selected" >Census PUMS</option>
            <option value="5126">Science Teachers and Climate Change</option>
            <option value="5127">Voter Validation CCES</option>
            </select>
        </td>
    </tr>    
    <tr>
        <td title="You can select any dataset on the test Dataverse instance at https://beta.dataverse.org by entering its unique file ID number, or use one of the datasets provided in the selection box above." align="right">
            or enter Dataverse fileid number:
        </td>
        <td title="You can select any dataset on the test Dataverse instance at https://beta.dataverse.org by entering its unique file ID number, or use one of the datasets provided in the selection box above." style="padding:0 0 0 8px;">
            <input type="text" name="altfileid" onchange="overridedataset(this.value)" maxlength="5" style="width: 50px;" >
        </td>
    </tr>
    <button title="Show a video describing the features and use of this budgeting tool." onclick="location.href='http://beta.dataverse.org/custom/DifferentialPrivacyPrototype/video/Interactive_Query_Demo_Captioned.mp4';" style="color:#108db7;float:right; margin-right: 10%; margin-top:0.75em; padding-right:0.5em; padding-top:0.5em;">
<span class="glyphicon glyphicon-play-circle" style="color:#108db7; font-size: 22px; vertical-align: middle; margin-bottom: 0.125em; margin-top: -0.125em;" aria-hidden="true"></span>
    Watch a Video Overview of this Tool</button>
</table>
</div>


    <div class="flex-container">
        <header>
<div title="This is the name, in Dataverse, of the selected example dataset." id="datasetName" style="text-align:center;">
  <h2 style="display:inline;">Dataset Name</h2>
</div>
            <h4 title="These are adjustable parameters that define the level of privacy protection guaranteed by the differentially private released statistics.">Privacy Parameters</h4>
            <table align="center">
                <tr>
                    <td title="Epsilon from definition of differential privacy. Smaller values correspond to more privacy.">
                        Epsilon (&epsilon;)
                    </td>
                    <td title = "Delta from definition of differential privacy. Smaller values correspond to more privacy.">
                        Delta (&delta;)
                    </td>
                    <td title="Probability that the error for a given statistic exceeds the estimate reported in the Accuracy column." style="padding:0 15px 0 15px;" >
                        Beta (&Beta;)
                    </td>

                    <td title="Is the data a random and secret sample from a larger population of known size? Here, secret means that the choice of the people in the sample has not been revealed. If this is the case, you can improve the accuracy of your statistics without changing the privacy guarantee. Estimate the size of the larger population. It is important to be conservative in your estimate. In other words, it is okay underestimate but could violate privacy if you overestimate.">
                        Secrecy of the Sample
                    </td>
                    <td title="When using secrecy of the sample, you get a boost in epsilon, which is represented here. This value can only be edited by changing the epsilon or secrecy of the sample fields.">
                        Functioning Epsilon
                    </td>
                    <td title="When using secrecy of the sample, you get a boost in delta, which is represented here. This value can only be edited by changing the delta or secrecy of the sample fields.">
                        Functioning Delta
                    </td>

                </tr>
                <tr>
                    <td>
                        <input name="epsilon" onfocusout="global_parameters_epsilon(this)" title="Epsilon from definition of differential privacy. Smaller values correspond to more privacy." value="0.1" style="color: black;" type="text" placeholder="Epsilon">
                    </td>
                    <td>
                        <input name="delta" onfocusout="global_parameters_delta(this)"  title = "Delta from definition of differential privacy. Smaller values correspond to more privacy." value="0.000001" style="color: black;" type="text" placeholder="Delta">
                    </td>
                    <td style="padding:0 15px 0 0;">
                        <input name="beta" onfocusout="global_parameters_beta(this)" title="Probability that the error for a given statistic exceeds the estimate reported in the Accuracy column." value="0.05" style="color: black;" type="text" placeholder="Beta">
                    </td>

                    <td>
                        <input id="SS" name="SS" onfocusout="global_parameters_SS(this)" title="Is the data a random and secret sample from a larger population of known size? Here, secret means that the choice of the people in the sample has not been revealed. If this is the case, you can improve the accuracy of your statistics without changing the privacy guarantee. Estimate the size of the larger population. It is important to be conservative in your estimate. In other words, it is okay underestimate but could violate privacy if you overestimate." value="" style="color: black;" type="text" placeholder="">
                    </td>
                    <td>
                        <input id="FE" name="FE" title="When using secrecy of the sample, you get a boost in epsilon, which is represented here. This value can only be edited by changing the epsilon or secrecy of the sample fields." value="" style="color: black;" type="text" placeholder="none if no Sec. Sample" readonly>
                    </td>
                    <td>
                        <input id="FD" name="FD" title="When using secrecy of the sample, you get a boost in delta, which is represented here. This value can only be edited by changing the delta or secrecy of the sample fields." value="" style="color: black;" type="text" placeholder="none if no Sec. Sample" readonly>
                    </td>

                </tr>
                <tr>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>
                    <td>
                    <input title="Remove any entered value for the secrecy of the sample, and revert privacy parameters to the values without adjustment." type="button" style="color:gray;" onclick="clear_SS()" value="Clear">
                    </td>
                    <td>
                    </td>
                    <td>
                    </td>

            </table>
        
        </header>

        <!-- Variable Selection -->
        <nav class="variable_sidebar">
            <!-- Searchbar -->
            <input id='live-search-box' style="display:none" type="text" class="live-search-box" placeholder="Search Here">

            <!-- Variable List -->
            <!-- <ul id="variable_sidebar" class="live-search-list"></ul> -->
        </nav>

        <article class="main">
            <!-- Page Content: Bubbles -->
            <div id="bubble_form" style=""></div>

        </article>

        <!-- Epsilon Sidebar Table -->
        <nav id="epsilon_sidebar" class="epsilon_sidebar"></nav>
    </div>

    <footer>
        <div>
            <br>
            <button title="This shows the full underlying table that is being constructed, containing all the metadata information, and budgeting of epsilon and accuracies." onclick='report();' style="color:gray;">Show Underlying Table</button>
            <button title="This button creates a differentially private release of the statistics presently requested, at their budgeted values of the privacy parameters." onclick='submit();' style="color:red;">Submit Table and Generate Differentially Private Release</button>
            <br>
            <br>
            PSI (&Psi;): a Private data Sharing Interface
        </div>
    </footer>
    
    <script type="text/javascript" src="interface.js"></script> 

</body>

</html>